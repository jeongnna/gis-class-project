---
title: "따릉이 GIS 분석 요약"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
load("../RData/draw-maps.RData")
```


## 데이터

1. 우리나라 지도 shape 파일 $\to$ 송파구만 추출
2. 송파구 동별 인구 $\to$ 동별 면적으로 나눠서 인구밀도로 변환
3. 서울 유동인구 $\to$ 송파구만 추출
4. 송파구 따릉이 대여소 위치

- *자료 출처 명시해야 될 듯*


## 송파구 동별 인구밀도

```{r}
pop_point
```

- 점의 크기가 클수록 인구밀도가 큼


## 송파구 지점별 유동인구

```{r}
fpop_point
```

- 점의 크기가 클수록 유동인구가 많음
- 각 점들은 유동인구 관측지점들이고 점들이 밀집해 있는 것과 유동인구의 크기 사이에는 관계가 없음


## 송파구 따릉이 대여소 위치

```{r}
rental_point
```


## Interpolation

- 동별 인구밀도: Inverse distance weighting (IDW)
- 유동인구: Inverse distance weighting (IDW)
- 따릉이 대여소: Kernel density estimation (KDE)
    + 격자는 10m 간격
    + KDE에서 커널 함수는 1km 반경 내에 위치한 따릉이 대여소 갯수


## Interpolation 결과 - 인구밀도

```{r}
pop_map
```


## Interpolation 결과 - 유동인구(1)

```{r}
fpop_map
```

- 몇 개의 극단값으로 인해 고르게 점수화하기 어려움
- 여러가지 변환을 시도
    + $x \to log(x)$
    + $x \to \sqrt{x}$
    + $x \to \sqrt{\sqrt{x}}$
- $x \to \sqrt{\sqrt{x}}$ 변환시에 가장 고른 분포를 보임


## Interpolation 결과 - 유동인구(2)

```{r}
fpop.25_map
```


## Interpolation 결과 - 따릉이 대여소 밀집도

```{r}
rental_map
```


## 점수화

- 3개의 Raster 자료를 구성
    + 인구밀도
    + 유동인구
    + 따릉이 대여소 밀집도
- 자료들끼리 직접직인 비교가 가능하도록 0~1 사이의 값으로 정규화
    + $x^\prime = \frac{x - \min x}{\max x - \min x}$
- 정규화된 자료들을 합해서 점수를 계산
    + (Score) = (인구밀도) + (유동인구) + (따릉이 대여소 밀집도)


## 점수 지도

```{r}
score_map
```

- 점수가 높은 구역
    + 석촌호수 주변
    + 성내천 주변
    + 문정역/장지역 주변